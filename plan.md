#  Plan banan

Создать сервис, который будет в фоновом режиме отрабатывать запрос в Google Direction API

Нужно как то реализовать момент:

Когда в таблицу route добавляется запись, вызывается фоновая задача.
Может ли в нашем примере, при использовании базы данных PostreSQL.
Из базы приходить запрос на запуск определённого сервиса.

Нужно создать отдельную таблицу в базе данных. Она будет похожа на Route только, в новой будет добавлено столбец distance.
Distance мы будем получать из Google Direction API
Это всё для того, чтобы не затрагивать клиенскую часть и уменьшить нагрузку с клиенской части.


Алгоритм работы системы:

1. Клиент посылает за сервер запрос. SwiftUI 
2. Сервер принимает запрос от клиента. Vapor
3. Сервер обрабатывает/проверяет запрос. Vapor
4. Сервер отправляет данные в базу. Vapor
5. База данных сохраняет данные. PostgreSQL
6. Сохраняем ид, для будущей фоновой задачи. Redis
7. Запускается фоновая задача, беря ид из очереди в Redis. Vapor
8. Достаём запись из базы данных по ИД. Vapor
9. Формируем объект для выполнения запроса в Google Directions API
10. Отправляем запрос в Google Directions API
11. Получаем ответ, создаём новый объект.
12. Сохраняем новый объект в базу.
